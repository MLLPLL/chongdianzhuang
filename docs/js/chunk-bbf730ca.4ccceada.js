(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bbf730ca"],{"3e29":function(e,t,n){"use strict";n.d(t,"d",function(){return i}),n.d(t,"a",function(){return l}),n.d(t,"e",function(){return s}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return u});var a=n("b775"),r=n("9fb0"),o=r["l"];function i(e){return Object(a["b"])({url:o+"/author/page?pageNum="+e.pageNum+"&pageSize="+e.pageSize,method:"get"})}function l(e){return Object(a["b"])({url:o+"/author/add",method:"post",data:e})}function s(e){return Object(a["b"])({url:o+"/author/update",method:"post",data:e})}function c(e){return Object(a["b"])({url:o+"/author/del",method:"post",data:e})}function u(){return Object(a["b"])({url:o+"/author/getAll",method:"get"})}},"57bd":function(e,t,n){"use strict";var a=n("ed09"),r=n.n(a);r.a},7368:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{attrs:{bordered:!1}},[n("a-row",{attrs:{gutter:8}},[n("a-col",[n("div",{staticClass:"add-btn"},[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.addAuthor}},[e._v("新增")]),n("a-button",{staticStyle:{"margin-left":"1%"},attrs:{type:"primary",disabled:!1,loading:e.loading,icon:"delete"},on:{click:e.start}},[e._v("\n          删除\n        ")])],1),n("s-table",{ref:"table",attrs:{data:e.loadData,rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange},scoll:{x:!0},columns:e.columns,size:"default"},scopedSlots:e._u([{key:"description",fn:function(t,a){return n("span",{},[a.description&&a.description.replace(/[\u0391-\uFFE5]/g,"aa").length>60?n("a-tooltip",{key:a.description,attrs:{title:a.description,placement:"topLeft",autoAdjustOverflow:!0}},[e._v(e._s(a.description.slice(0,60)+"..."))]):n("span",[e._v(e._s(a.description))])],1)}},{key:"action",fn:function(t,a){return n("span",{},[n("a",{on:{click:function(t){return e.onRead(a)}}},[e._v("查看")]),n("a-divider",{attrs:{type:"vertical"}}),n("a",{on:{click:function(t){return e.onDelete(a)}}},[e._v("删除")])],1)}}])})],1)],1),n("add-author",{ref:"addModel",on:{ok:e.handleSaveOk,close:e.handleSaveClose}})],1)},r=[],o=(n("06db"),n("795b")),i=n.n(o),l=n("e8c4"),s=n("3e29"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading,destroyOnClose:e.destroy,keyboard:!1,maskClosable:!1},on:{ok:e.handleOk,cancel:e.handleCancel}},[n("a-spin",{attrs:{spinning:e.confirmLoading}},[n("a-form",{attrs:{form:e.form}},[n("a-row",[n("a-col",{staticStyle:{display:"'block'"},attrs:{span:12}},[n("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"名称",hasFeedback:""}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入作者名称"},{whitespace:!0,message:"请勿输入空格"}]}],expression:"['name', { rules: [{ required: true, message: '请输入作者名称' },{ whitespace: true, message: '请勿输入空格'}] }]"}],attrs:{placeholder:"名称"}})],1),n("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"性别",hasFeedback:""}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["gender",{rules:[{required:!0,message:"请选择性别"}]}],expression:"['gender', { rules: [{ required: true, message: '请选择性别' }] }]"}],attrs:{placeholder:"请选择"}},[n("a-select-option",{attrs:{value:"1"}},[e._v("男")]),n("a-select-option",{attrs:{value:"0"}},[e._v("女")])],1)],1)],1),n("a-col",{staticStyle:{display:"'block'"},attrs:{span:9,offset:3}},[n("a-form-item",{attrs:{label:"头像",labelCol:e.labelCol,wrapperCol:e.wrapperCol,hasFeedback:""}},[n("a-upload",{directives:[{name:"decorator",rawName:"v-decorator",value:["avatar",{rules:[{required:!0,message:"请上传头像"},{validator:e.validatePass}]}],expression:"['avatar', { rules: [{ required: true, message: '请上传头像' }, {validator: validatePass}] }]"}],staticClass:"avatar-uploader",attrs:{listType:"picture-card",showUploadList:!1,action:"//jsonplaceholder.typicode.com/posts/",beforeUpload:e.beforeUpload,accept:"image/png, image/jpeg, image/jpg"}},[e.imageUrl?n("img",{staticClass:"img",attrs:{src:e.imageUrl,alt:"avatar"}}):n("div",[n("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),n("div",{staticClass:"ant-upload-text"},[e._v("上传头像")])],1)])],1)],1),n("a-col",{staticClass:"formItemLayout",staticStyle:{display:"'block'"},attrs:{span:24}},[n("a-form-item",{staticStyle:{"margin-left":"-3px"},attrs:{labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol,label:"描述"}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["description"],expression:"['description']"}],staticStyle:{width:"98%",height:"70px"},attrs:{placeholder:"请输入描述"}})],1)],1)],1)],1)],1)],1)},u=[],d=n("e814"),f=n.n(d),p=n("5176"),m=n.n(p),h=n("f499"),g=n.n(h),b=n("a026"),v=n("88bc"),y=n.n(v),w=n("af85"),C=n("ca00"),j=new b["a"],x=function(e,t,n){if(t&&t.file){var a="image/jpeg"===t.file.type||"image/png"===t.file.type||"image/jpg"===t.file.type;a||n(new Error("请上传JPEG,PNG,JPG图片"))}n()},O={name:"AddAuthor",data:function(){return{title:"新增作者",id:null,labelCol:w["a"],wrapperCol:w["c"],visible:!1,confirmLoading:!1,loading:!1,mdl:{},destroy:!0,form:this.$form.createForm(this),imageUrl:null,avatarFile:null,validatePass:x,formItemLayout:{labelCol:{xs:{span:3},sm:{span:3}},wrapperCol:{xs:{span:20},sm:{span:20}}},authorId:null}},created:function(){},methods:{add:function(){this.title="新增作者",this.authorId=null,this.avatarFile=null,this.imageUrl=null,this.visible=!0},read:function(e){var t=this,n=JSON.parse(g()(e));this.authorId=n.id,this.title="作者信息",this.avatarFile=null,this.imageUrl=null,n.gender+="",this.imageUrl=n.avatar,this.mdl=m()({},n),setTimeout(function(){t.form.setFieldsValue(y()(t.mdl,"id","name","gender","description","avatar"))},0),this.visible=!0},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this;this.form.validateFields(function(t,n){!t&&e.imageUrl&&(e.confirmLoading=!0,n.avatar=e.imageUrl,n.gender=f()(n.gender),e.authorId?(n.id=e.authorId,Object(s["e"])(n).then(function(t){e.dealResult(t)}).catch(function(t){e.confirmLoading=!1,e.$message.error("新增失败:"+t)})):Object(s["a"])(n).then(function(t){e.dealResult(t)}).catch(function(t){e.confirmLoading=!1,e.$message.error("修改失败:"+t)}))})},handleCancel:function(){this.close()},beforeUpload:function(e){var t=this,n="image/jpeg"===e.type||"image/png"===e.type||"image/jpg"===e.type;return n?(this.avatarFile=e,this.loading=!0,Object(C["c"])(this.avatarFile).then(function(e){t.imageUrl=e.url,console.info("图片上传成功"+e),t.loading=!1}),!1):(this.imageUrl="",!1)},dealResult:function(e){var t=this;e.result?(t.confirmLoading=!1,t.close(),j.$emit("success")):(t.$message.error(e.message),t.confirmLoading=!1)}}},S=O,$=(n("e7db"),n("2877")),k=Object($["a"])(S,c,u,!1,null,"3a96c78e",null),R=k.exports,F={name:"AuthorListPage",components:{AddAuthor:R,STable:l["a"]},data:function(){var e=this;return{columns:[{title:"作者名称",dataIndex:"name",width:"150px",align:"left"},{title:"性别",dataIndex:"gender",width:"80px",align:"left",customRender:function(t){return e.judegGender(t)}},{title:"描述说明",dataIndex:"description",align:"left",width:"500px",scopedSlots:{customRender:"description"}},{title:"操作",dataIndex:"action",width:"150px",align:"center",scopedSlots:{customRender:"action"}}],loadData:function(t){return Object(s["d"])(t).then(function(t){if(t.result)return t.object;e.$message.error(t.message);var n={size:100,current:1,pages:1,total:5,records:[]};return n})},selectedRowKeys:[],loading:!1}},created:function(){var e=this;j.$on("success",function(){e.$refs.table.refresh(!0),e.$message.success("操作成功")}),j.$on("error",function(t){e.$message.error(t)}),this.visible=!0},computed:{hasSelected:function(){return this.selectedRowKeys.length>0}},methods:{judegGender:function(e){return 1===e?"男":0===e?"女":void 0},addAuthor:function(){this.$refs.addModel.add()},onRead:function(e){this.$refs.addModel.read(e)},onDelete:function(e){this.$confirm({title:"是否确认删除?",style:"top: 270px;",onOk:function(){var t=[e.id+""];Object(s["b"])(t).then(function(e){e.result?j.$emit("success"):j.$emit("error",e.message)}).catch(function(e){j.$emit("error","操作失败"+e)})},onCancel:function(){}})},onExport:function(){this.$confirm({title:"是否确认导出?",style:"top: 270px;",onOk:function(){new i.a(function(e){setTimeout(function(){return e()},1e3)}).then(function(){j.$emit("success")}).catch(function(e){j.$emit("error","操作失败"+e)})},onCancel:function(){}})},start:function(){var e=this;e.selectedRowKeys.length>0?this.$confirm({title:"是否确认删除?",style:"top: 270px;",onOk:function(){e.loading=!0,Object(s["b"])(e.selectedRowKeys).then(function(t){t.result?(e.selectedRowKeys=[],j.$emit("success")):j.$emit("error",t.message)}).catch(function(e){j.$emit("error","操作失败"+e)}).finally(function(){e.loading=!1})},onCancel:function(){}}):this.$message.error("请选择数据！")},onSelectChange:function(e){console.log("selectedRowKeys changed: ",e),this.selectedRowKeys=e},handleSaveOk:function(){},handleSaveClose:function(){}}},L=F,_=(n("57bd"),Object($["a"])(L,a,r,!1,null,null,null));t["default"]=_.exports},"88bc":function(e,t,n){(function(t){var n=1/0,a=9007199254740991,r="[object Arguments]",o="[object Function]",i="[object GeneratorFunction]",l="[object Symbol]",s="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,u=s||c||Function("return this")();function d(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function f(e,t){var n=-1,a=e?e.length:0,r=Array(a);while(++n<a)r[n]=t(e[n],n,e);return r}function p(e,t){var n=-1,a=t.length,r=e.length;while(++n<a)e[r+n]=t[n];return e}var m=Object.prototype,h=m.hasOwnProperty,g=m.toString,b=u.Symbol,v=m.propertyIsEnumerable,y=b?b.isConcatSpreadable:void 0,w=Math.max;function C(e,t,n,a,r){var o=-1,i=e.length;n||(n=S),r||(r=[]);while(++o<i){var l=e[o];t>0&&n(l)?t>1?C(l,t-1,n,a,r):p(r,l):a||(r[r.length]=l)}return r}function j(e,t){return e=Object(e),x(e,t,function(t,n){return n in e})}function x(e,t,n){var a=-1,r=t.length,o={};while(++a<r){var i=t[a],l=e[i];n(l,i)&&(o[i]=l)}return o}function O(e,t){return t=w(void 0===t?e.length-1:t,0),function(){var n=arguments,a=-1,r=w(n.length-t,0),o=Array(r);while(++a<r)o[a]=n[t+a];a=-1;var i=Array(t+1);while(++a<t)i[a]=n[a];return i[t]=o,d(e,this,i)}}function S(e){return R(e)||k(e)||!!(y&&e&&e[y])}function $(e){if("string"==typeof e||N(e))return e;var t=e+"";return"0"==t&&1/e==-n?"-0":t}function k(e){return L(e)&&h.call(e,"callee")&&(!v.call(e,"callee")||g.call(e)==r)}var R=Array.isArray;function F(e){return null!=e&&A(e.length)&&!_(e)}function L(e){return U(e)&&F(e)}function _(e){var t=I(e)?g.call(e):"";return t==o||t==i}function A(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function I(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function U(e){return!!e&&"object"==typeof e}function N(e){return"symbol"==typeof e||U(e)&&g.call(e)==l}var K=O(function(e,t){return null==e?{}:j(e,f(C(t,1),$))});e.exports=K}).call(this,n("24aa"))},a21f:function(e,t,n){var a=n("584a"),r=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},af85:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"b",function(){return o});var a={xs:{span:6},sm:{span:6}},r={xs:{span:15},sm:{span:15}},o={labelCol:{xs:{span:6},sm:{span:12},lg:{span:3}},wrapperCol:{xs:{span:6},sm:{span:12},lg:{span:4}}}},e7db:function(e,t,n){"use strict";var a=n("e832"),r=n.n(a);r.a},e832:function(e,t,n){},ed09:function(e,t,n){},f499:function(e,t,n){e.exports=n("a21f")}}]);