(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d1a14dd6"],{"3c60":function(e,t,n){},"6b2b":function(e,t,n){"use strict";var a=n("3c60"),o=n.n(a);o.a},"86a0":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{attrs:{bordered:!1}},[n("div",{staticClass:"add-btn"},[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.addTag}},[e._v("新增")]),n("a-button",{staticStyle:{"margin-left":"1%"},attrs:{type:"primary",disabled:!1,loading:e.loading,icon:"delete"},on:{click:e.start}},[e._v("\n      删除\n    ")])],1),n("a-row",{attrs:{gutter:8}},[n("a-col",[n("s-table",{ref:"table",attrs:{rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange},data:e.tagsData}},[n("a-table-column",{key:"name",attrs:{title:"标签名称",dataIndex:"name",width:"85%"}}),n("a-table-column",{key:"action",attrs:{title:"操作",width:"15%"},scopedSlots:e._u([{key:"default",fn:function(t,a){return[n("span",[n("a",{on:{click:function(t){return e.onDelete(a)}}},[e._v("删除")])])]}}])})],1)],1)],1),n("add-tag",{ref:"addModel",on:{ok:e.handleSaveOk,close:e.handleSaveClose}})],1)},o=[],s=(n("06db"),n("5176")),r=n.n(s),i=n("e8c4"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{attrs:{title:e.title,width:400,visible:e.visible,confirmLoading:e.confirmLoading,destroyOnClose:e.destroy},on:{ok:e.handleOk,cancel:e.handleCancel}},[n("a-spin",{attrs:{spinning:e.confirmLoading}},[n("a-form",{attrs:{form:e.form}},[n("a-row",[n("a-col",{staticStyle:{display:"'block'"},attrs:{span:24}},[n("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"标签名称",hasFeedback:""}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入标签名称"},{validator:e.maxLength},{whitespace:!0,message:"请勿输入空格"}]}],expression:"['name', { rules: [{ required: true, message: '请输入标签名称' },{ validator: maxLength },{ whitespace: true, message: '请勿输入空格'}] }]"}],attrs:{placeholder:"标签名称"}})],1)],1)],1)],1)],1)],1)},l=[],u=(n("a481"),n("a026")),d=n("fac5"),f=n("af85"),m=new u["a"],g=function(e,t,n){var a=100;if(t){var o=t.replace(/[\u0391-\uFFE5]/g,"aa").length;o>a&&n(new Error("最大"+a+"字符"))}n()},h={name:"AddTag",data:function(){return{title:"新增标签",id:null,labelCol:f["a"],wrapperCol:f["c"],visible:!1,confirmLoading:!1,mdl:{},destroy:!0,maxLength:g,form:this.$form.createForm(this)}},created:function(){},methods:{add:function(){this.title="新增标签",this.visible=!0},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this;this.form.validateFields(function(t,n){t||(e.confirmLoading=!0,Object(d["a"])(n).then(function(t){e.dealResult(t)}).catch(function(t){e.confirmLoading=!1,e.$message.error("新增失败:"+t)}))})},handleCancel:function(){this.close()},dealResult:function(e){var t=this;e.result?(t.confirmLoading=!1,t.close(),m.$emit("success")):(t.$message.error(e.message),t.confirmLoading=!1)}}},p=h,b=n("2877"),v=Object(b["a"])(p,c,l,!1,null,"a0635250",null),w=v.exports,y={name:"TagListPage",components:{STable:i["a"],AddTag:w},data:function(){var e=this;return{mode:"comment",selectedRowKeys:[],loading:!1,tagsData:function(t){return Object(d["d"])(r()({},{pageNum:t.pageNum,pageSize:t.pageSize})).then(function(t){if(t.result)return t.object;e.$message.error(t.message);var n={size:100,current:1,pages:1,total:5,records:[]};return n}).catch(function(e){console.info(e)})}}},created:function(){var e=this;m.$on("success",function(){e.$refs.table.refresh(!0),e.$message.success("操作成功")}),m.$on("error",function(t){e.$message.error(t)}),this.visible=!0},methods:{addTag:function(){this.$refs.addModel.add()},onDelete:function(e){this.$confirm({title:"是否确认删除?",style:"top: 270px;",onOk:function(){var t=[e.id+""];Object(d["b"])(t).then(function(e){e.result?m.$emit("success"):m.$emit("error",e.message)}).catch(function(e){m.$emit("error","操作失败"+e)})},onCancel:function(){}})},handleSaveOk:function(){},handleSaveClose:function(){},start:function(){var e=this;e.selectedRowKeys.length>0?this.$confirm({title:"是否确认删除?",style:"top: 270px;",onOk:function(){e.loading=!0,Object(d["b"])(e.selectedRowKeys).then(function(t){t.result?(e.selectedRowKeys=[],m.$emit("success")):m.$emit("error",t.message)}).catch(function(e){m.$emit("error","操作失败"+e)}).finally(function(){e.loading=!1})},onCancel:function(){}}):this.$message.error("请选择数据！")},onSelectChange:function(e){console.log("selectedRowKeys changed: ",e),this.selectedRowKeys=e}}},$=y,k=(n("6b2b"),Object(b["a"])($,a,o,!1,null,null,null));t["default"]=k.exports},af85:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"b",function(){return s});var a={xs:{span:6},sm:{span:6}},o={xs:{span:15},sm:{span:15}},s={labelCol:{xs:{span:6},sm:{span:12},lg:{span:3}},wrapperCol:{xs:{span:6},sm:{span:12},lg:{span:4}}}},fac5:function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return c}),n.d(t,"a",function(){return l});var a=n("b775"),o=n("9fb0"),s=o["l"];function r(e){return Object(a["b"])({url:s+"/tag/list",method:"post",data:e})}function i(){return Object(a["b"])({url:s+"/tag/getAll",method:"get"})}function c(e){return Object(a["b"])({url:s+"/tag/batchDelete",method:"post",data:e})}function l(e){return Object(a["b"])({url:s+"/tag/add",method:"post",data:e})}}}]);