(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1330092c"],{"06f8":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-card",{attrs:{bordered:!1}},[n("a-row",{attrs:{gutter:8}},[n("a-col",[n("div",{staticClass:"add-btn"},[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:t.addVote}},[t._v("新增")])],1),n("s-table",{ref:"table",attrs:{size:"default",columns:t.columns,data:t.loadData},scopedSlots:t._u([{key:"action",fn:function(e,r){return n("span",{},[n("a",{on:{click:function(e){return t.edit(r)}}},[t._v("查看")]),n("a-divider",{attrs:{type:"vertical"}}),1===r.recommend?n("a",{on:{click:function(e){return t.cancelRecommend(r)}}},[t._v("取消推荐")]):n("a",{on:{click:function(e){return t.setRecommend(r)}}},[t._v("推荐")]),n("a-divider",{attrs:{type:"vertical"}}),n("a-dropdown",[n("a",{staticClass:"ant-dropdown-link"},[t._v("\n              更多 "),n("a-icon",{attrs:{type:"down"}})],1),n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",[n("a",{on:{click:function(e){return t.edit(r)}}},[t._v("在线查看结果")])]),n("a-menu-item",[n("a",{on:{click:function(e){return t.onExport(r)}}},[t._v("导出结果")])]),n("a-menu-item",[n("a",{on:{click:function(e){t.withDraw(r)}}},[t._v("下架")])]),n("a-menu-item",[n("a",{on:{click:function(e){return t.onDelete(r)}}},[t._v("删除")])])],1)],1)],1)}}])})],1)],1)],1)},o=[],c=n("5176"),i=n.n(c),u=n("e8c4"),a=n("fd47"),s=n("5040"),d=n("b775"),l=n("a026"),f=new l["a"],m={name:"VoteListPage",components:{STable:u["a"]},data:function(){var t=this;return{columns:[{title:"标题",dataIndex:"title",align:"center"},{title:"已参与人数",dataIndex:"participantNum",align:"center",sorter:function(t,e){return t.participantNum-e.participantNum}},{title:"状态",dataIndex:"status",align:"center",customRender:function(e){return t.judegStatus(e)},sorter:function(t,e){return t.status-e.status}},{title:"进度",dataIndex:"scheduled",align:"center",customRender:function(e){return t.judegScheduled(e)},sorter:function(t,e){return t.scheduled-e.scheduled}},{title:"是否推荐",dataIndex:"recommend",align:"center",customRender:function(t,e,n){return 1===t?"是":"否"}},{title:"截止时间",dataIndex:"endTime",align:"center",sorter:function(t,e){return new Date(t.endTime).getTime()-new Date(e.endTime)}},{title:"操作",dataIndex:"action",align:"center",scopedSlots:{customRender:"action"}}],loadData:function(e){return e.orderDirection&&("ascend"===e.orderDirection?e.orderDirection="ASC":e.orderDirection="DESC"),Object(a["b"])(i()({},e)).then(function(e){if(e.result)return e.object;t.$message.error(e.message);var n={size:100,current:1,pages:1,total:5,records:[]};return n})},funFilterVo:{name:""}}},created:function(){var t=this;f.$on("success",function(){t.$refs.table.refresh(!0),t.$message.success("操作成功")}),f.$on("error",function(e){t.$message.error(e)}),this.visible=!0},methods:{judegStatus:function(t){return 0===t?"草稿":1===t?"待发布":2===t?"已发布":3===t?"下架":void 0},judegScheduled:function(t){return 0===t?"未开始":1===t?"进行中":2===t?"已结束":void 0},edit:function(t){var e=this.$router.resolve("/vote/addvote?id="+t.id);window.open(e.href,"_blank")},addVote:function(){var t=this.$router.resolve("/vote/addvote");window.open(t.href,"_blank")},onDelete:function(t){this.$confirm({title:"是否确认删除?",style:"top: 270px;",onOk:function(){Object(s["a"])(t.id).then(function(t){t.result?f.$emit("success"):f.$emit("error",t.message)}).catch(function(t){f.$emit("error","操作失败"+t)})},onCancel:function(){}})},handleSaveOk:function(){},handleSaveClose:function(){},withDraw:function(t){this.$confirm({title:"是否确认下架?",style:"top: 270px;",onOk:function(){Object(s["b"])(t.id).then(function(t){t.result?f.$emit("success"):f.$emit("error",t.message)}).catch(function(t){f.$emit("error","操作失败"+t)})},onCancel:function(){}})},onExport:function(t){location.href=d["c"]+"/app-service/vote/export/"+t.id},cancelRecommend:function(t){this.$confirm({title:"是否确认取消推荐?",style:"top: 270px;",onOk:function(){Object(s["c"])(t.id,0).then(function(){f.$emit("success")}).catch(function(t){f.$emit("error","操作失败"+t)})},onCancel:function(){}})},setRecommend:function(t){this.$confirm({title:"是否确认推荐?",style:"top: 270px;",onOk:function(){Object(s["c"])(t.id,1).then(function(){f.$emit("success")}).catch(function(t){f.$emit("error","操作失败"+t)})},onCancel:function(){}})}}},v=m,b=(n("eb05"),n("2877"));n.d(e,"ref",function(){return f});var p=Object(b["a"])(v,r,o,!1,null,"03ab7f8d",null);e["default"]=p.exports},5040:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return a});var r=n("b775"),o=n("9fb0"),c=o["l"];function i(t){return Object(r["b"])({url:c+"/content/delete/"+t,method:"get"})}function u(t){return Object(r["b"])({url:c+"/content/down/"+t,method:"get"})}function a(t,e){return Object(r["b"])({url:c+"/content/recommend/"+t+"/"+e,method:"get"})}},"728d":function(t,e,n){},eb05:function(t,e,n){"use strict";var r=n("728d"),o=n.n(r);o.a},fd47:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"c",function(){return u}),n.d(e,"a",function(){return a});var r=n("b775"),o=n("9fb0"),c=o["l"];function i(t){return Object(r["b"])({url:c+"/vote/list",method:"post",data:t})}function u(t){return Object(r["b"])({url:c+"/vote/save",method:"post",data:t})}function a(t){return Object(r["b"])({url:c+"/vote/getById/"+t,method:"get"})}}}]);