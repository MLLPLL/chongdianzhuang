(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0fb9fbf0"],{5040:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return c}),n.d(e,"c",function(){return u});var r=n("b775"),i=n("9fb0"),o=i["l"];function a(t){return Object(r["b"])({url:o+"/content/delete/"+t,method:"get"})}function c(t){return Object(r["b"])({url:o+"/content/down/"+t,method:"get"})}function u(t,e){return Object(r["b"])({url:o+"/content/recommend/"+t+"/"+e,method:"get"})}},"7b7c":function(t,e,n){},c14b:function(t,e,n){"use strict";var r=n("7b7c"),i=n.n(r);i.a},e410:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-card",{attrs:{bordered:!1}},[n("a-row",{attrs:{gutter:8}},[n("a-col",[n("div",{staticClass:"add-btn"},[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:t.addQuestion}},[t._v("新增")])],1),n("s-table",{ref:"table",attrs:{size:"default",columns:t.columns,data:t.loadData},scopedSlots:t._u([{key:"title1",fn:function(e,r){return n("span",{},[r.title&&r.title.replace(/[\u0391-\uFFE5]/g,"aa").length>16?n("a-tooltip",{key:r.title,attrs:{title:r.title,placement:"topLeft",autoAdjustOverflow:!0}},[t._v(t._s(r.title.slice(0,16)+"..."))]):n("span",[t._v(t._s(r.title))])],1)}},{key:"action",fn:function(e,r){return n("span",{},[n("a",{on:{click:function(e){return t.edit(r)}}},[t._v("查看")]),n("a-divider",{attrs:{type:"vertical"}}),n("a",{on:{click:function(e){t.withDraw(r)}}},[t._v("下架")]),n("a-divider",{attrs:{type:"vertical"}}),n("a-dropdown",[n("a",{staticClass:"ant-dropdown-link"},[t._v("\n              更多 "),n("a-icon",{attrs:{type:"down"}})],1),n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",[n("a",{on:{click:function(e){return t.onDelete(r)}}},[t._v("删除")])]),n("a-menu-item",[n("a",{on:{click:function(e){return t.onExport(r)}}},[t._v("导出结果")])])],1)],1)],1)}}])})],1)],1)],1)},i=[],o=n("5176"),a=n.n(o),c=n("e8c4"),u=n("a026"),s=n("b775"),d=n("9fb0"),l=d["l"];function f(t){return Object(s["b"])({url:l+"/survey/list",method:"post",data:t})}var m=n("5040"),p=new u["a"],v={name:"QuestionListPage",components:{STable:c["a"]},data:function(){var t=this;return{columns:[{title:"标题",dataIndex:"title",width:"200px",align:"center",scopedSlots:{customRender:"title1"}},{title:"已参与人数",dataIndex:"participantNum",align:"center",sorter:function(t,e){return t.participantNum-e.participantNum}},{title:"截止时间",dataIndex:"endTime",align:"center",sorter:function(t,e){return new Date(t.endTime).getTime()-new Date(e.endTime)}},{title:"进度",dataIndex:"scheduled",align:"center",customRender:function(e){return t.judegScheduled(e)},sorter:function(t,e){return t.scheduled-e.scheduled}},{title:"是否推荐",dataIndex:"recommend",align:"center",customRender:function(t,e,n){return 0===t?"否":"是"}},{title:"状态",dataIndex:"status",align:"center",customRender:function(e){return t.judegStatus(e)},sorter:function(t,e){return t.status-e.status}},{title:"操作",dataIndex:"action",align:"center",scopedSlots:{customRender:"action"}}],loadData:function(e){return e.orderDirection&&("ascend"===e.orderDirection?e.orderDirection="ASC":e.orderDirection="DESC"),f(a()({},e)).then(function(e){if(e.result)return e.object;t.$message.error(e.message);var n={size:100,current:1,pages:1,total:5,records:[]};return n})},funFilterVo:{name:""}}},created:function(){var t=this;p.$on("success",function(){t.$refs.table.refresh(!0),t.$message.success("操作成功")}),p.$on("error",function(e){t.$message.error(e)}),this.visible=!0},methods:{judegStatus:function(t){return 0===t?"暂存":1===t?"未发布":2===t?"已发布":3===t?"下架":void 0},judegScheduled:function(t){return 0===t?"未开始":1===t?"进行中":2===t?"已结束":void 0},edit:function(t){var e=this.$router.resolve("/questionnaire/addQuestionnaire?id="+t.id);window.open(e.href,"_blank")},addQuestion:function(){var t=this.$router.resolve("/questionnaire/addQuestionnaire");window.open(t.href,"_blank")},onDelete:function(t){this.$confirm({title:"是否确认删除?",style:"top: 270px;",onOk:function(){Object(m["a"])(t.id).then(function(t){t.result?p.$emit("success"):p.$emit("error",t.message)}).catch(function(t){p.$emit("error","操作失败"+t)})},onCancel:function(){}})},handleSaveOk:function(){},handleSaveClose:function(){},withDraw:function(t){this.$confirm({title:"是否确认下架?",style:"top: 270px;",onOk:function(){Object(m["b"])(t.id).then(function(t){t.result?p.$emit("success"):p.$emit("error",t.message)}).catch(function(t){p.$emit("error","操作失败"+t)})},onCancel:function(){}})},onExport:function(t){location.href=s["c"]+"/app-service/survey/export/"+t.id}}},b=v,h=(n("c14b"),n("2877"));n.d(e,"ref",function(){return p});var g=Object(h["a"])(b,r,i,!1,null,"2e42f0cf",null);e["default"]=g.exports}}]);